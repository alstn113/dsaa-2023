maze = {(1, 1): {'E': 1, 'W': 0, 'N': 0, 'S': 1},
        (2, 1): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (3, 1): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (4, 1): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (5, 1): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (6, 1): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (7, 1): {'E': 1, 'W': 0, 'N': 1, 'S': 0},
        (1, 2): {'E': 1, 'W': 1, 'N': 0, 'S': 0},
        (2, 2): {'E': 0, 'W': 0, 'N': 0, 'S': 1},
        (3, 2): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (4, 2): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (5, 2): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (6, 2): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (7, 2): {'E': 0, 'W': 1, 'N': 1, 'S': 0},
        (1, 3): {'E': 0, 'W': 1, 'N': 0, 'S': 1},
        (2, 3): {'E': 1, 'W': 0, 'N': 1, 'S': 0},
        (3, 3): {'E': 1, 'W': 0, 'N': 0, 'S': 1},
        (4, 3): {'E': 1, 'W': 0, 'N': 1, 'S': 0},
        (5, 3): {'E': 0, 'W': 0, 'N': 0, 'S': 1},
        (6, 3): {'E': 1, 'W': 0, 'N': 1, 'S': 1},
        (7, 3): {'E': 1, 'W': 0, 'N': 1, 'S': 0},
        (1, 4): {'E': 1, 'W': 0, 'N': 0, 'S': 0},
        (2, 4): {'E': 1, 'W': 1, 'N': 0, 'S': 0},
        (3, 4): {'E': 1, 'W': 1, 'N': 0, 'S': 0},
        (4, 4): {'E': 0, 'W': 1, 'N': 0, 'S': 1},
        (5, 4): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (6, 4): {'E': 0, 'W': 1, 'N': 1, 'S': 0},
        (7, 4): {'E': 1, 'W': 1, 'N': 0, 'S': 0},
        (1, 5): {'E': 0, 'W': 1, 'N': 0, 'S': 1},
        (2, 5): {'E': 0, 'W': 1, 'N': 1, 'S': 1},
        (3, 5): {'E': 0, 'W': 1, 'N': 1, 'S': 0},
        (4, 5): {'E': 0, 'W': 0, 'N': 0, 'S': 1},
        (5, 5): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (6, 5): {'E': 0, 'W': 0, 'N': 1, 'S': 1},
        (7, 5): {'E': 0, 'W': 1, 'N': 1, 'S': 0}}


def get_maze_answer(maze: dict) -> list:
    rows, cols = zip(*maze.keys())
    N = max(rows)
    M = max(cols)

    stack = []
    direction = {
        'E': (0, 1),
        'W': (0, -1),
        'N': (-1, 0),
        'S': (1, 0)
    }
    visited = [[False]*(M+1) for _ in range(N+1)]

    stack.append((N, M, [(N, M)]))

    visited[N][M] = True

    while stack:
        x, y, path = stack.pop()
        if x == 1 and y == 1:
            return path

        for d in maze[(x, y)]:

            # 벽 = 0, 길 = 1
            if maze[(x, y)][d] == 0:
                continue

            dx, dy = direction[d]
            nx = x + dx
            ny = y + dy

            if visited[nx][ny]:
                continue

            stack.append((nx, ny, path + [(nx, ny)]))
            visited[nx][ny] = True

    return None


print(get_maze_answer(maze))
